<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Magos Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Magical">
  <link href="/editor/static/css/vendor/jquery-ui.min.css" rel="stylesheet">
  <link href="/editor/static/css/main.css" rel="stylesheet">
  <link id="theme" href="/editor/static/css/dark.css" rel="stylesheet">
  <link href="/editor/static/css/flash.css" rel="stylesheet">
</head>

<body>

  <!-- /* Handlebars templates start */ -->
  <script type="text/x-handlebars" data-template-name="infobox-view">
      {{! InfoBox }}
      <div class="magos-infobox well">
        <div class="navbar">
          <div class="navbar-inner navbar-inner-in-well">
            <div class="container">

              <a class="btn btn-navbar" data-toggle="collapse" data-target=".infobox-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>

              <h3 class="sortable-handle">Element Information</h3>

              <div class="nav-collapse infobox-collapse">

                <div class="row-fluid">

                  <div class="span4 infobox-span">

                    <div class="infobox-skillset infobox-physicus">

                      {{#unless App.selectedComponentController.content.properties.controls}}
                        {{#unless App.selectedComponentController.content.properties.collisions}}
                          {{#unless App.selectedComponentController.content.properties.gravitation}}
                            {{#unless App.selectedComponentController.content.properties.type}}
                              {{view App.EmptySettingsView templateName="emptySettings"}}
                            {{/unless}}
                          {{/unless}}
                        {{/unless}}
                      {{/unless}}

                      {{#if App.selectedComponentController.content.properties.type}}
                        <h4>Element Type</h4>
                        {{#view App.InfoBoxTypeView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-type"}}
                        <tr>
                          <td>
                          {{content.properties.type}}
                          </td>
                        </tr>
                        {{/view}}
                      {{/if}}

                      {{#if App.selectedComponentController.content.properties.controls}}
                        <h4>Controls</h4>
                        {{#view App.InfoBoxControlsView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-controls"}}
                          <tr>
                            <td>Method</td>
                            <td>
                              {{content.properties.controls.method}}
                            </td>
                          </tr>
                          <tr>
                            <td>Speed</td>
                            <td>
                              {{content.properties.controls.speed}}
                            </td>
                          </tr>
                          <tr>
                            <td>Jump Height</td>
                            <td>
                              {{content.properties.controls.jumpHeight}}
                            </td>
                          </tr>
                        {{/view}}
                      {{/if}}
                      

                      {{#if App.selectedComponentController.content.properties.collisions}}
                        <h4>Collisions</h4>
                        {{#view App.InfoBoxCollisionView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-collisions"}}
                          <tr>
                            <th class="oneOf3">Target</th><th class="oneOf3">Event</th><th class="alignRight"></th>
                          </tr>
                          {{#each content.properties.collisions}}
                          <tr>
                            <td class="oneOf3">
                              {{#if target}} {{target.title}} {{else}} ---{{/if}}
                            </td>
                            <td class="oneOf3">
                              {{#if event}} {{event.title}} {{else}} ---{{/if}}
                            </td>
                            <td class="alignRight">
                              <button {{action removeCollision target="view"}} class="btn btn-danger"><span class="icon icon-trash"></span></button>
                            </td>
                          </tr>
                          {{/each}}

                        {{/view}}
                      {{/if}}

                      {{#if App.selectedComponentController.content.properties.gravitation}}
                      <h4>Gravitation</h4>
                        {{#view App.InfoBoxGravitationView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-gravitation"}}
                          <tr>
                            <td class="oneOf3">Strength</td>
                            <td class="oneOf3">
                              {{content.properties.gravitation.strength}}
                            </td>
                            <td class="alignRight">
                              <button {{action removeGravitation target="view"}} class="btn btn-danger"><span class="icon icon-trash"></span></button>
                            </td>
                          </tr>
                        {{/view}}
                      {{/if}}

                    </div>
                  </div><!--/span-->

                  <div class="span4">

                    <div class="infobox-skillset infobox-principes">

                      {{#unless App.selectedComponentController.content.filteredScoreEvents}}
                        {{#unless App.selectedComponentController.content.properties.font}}
                          {{#unless App.selectedComponentController.content.filteredDialogEvents}}
                            {{#unless App.selectedComponentController.content.filteredTextEvents}}
                              {{view App.EmptySettingsView templateName="emptySettings"}}
                            {{/unless}}
                          {{/unless}}
                        {{/unless}}
                      {{/unless}}

                      {{#if App.selectedComponentController.content.filteredScoreEvents}}
                        <h4>Score</h4>
                        {{#view App.InfoBoxScoreView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-score"}}
                          <tr>
                            <th>Action</th><th>Score</th>
                          </tr>
                          {{#each content.filteredScoreEvents}}
                            <tr>
                              <td>Collision {{target}}</td><td>{{score}}</td>
                            </tr>
                          {{/each}}
                        {{/view}}
                      {{/if}}

                      {{#if App.selectedComponentController.content.properties.font}}
                        <h4>Font</h4>
                        {{#view App.InfoBoxFontView}}
                          <div {{bindAttr style="cssBgColor"}}>
                            <div {{bindAttr style="cssColor"}}>
                              <div {{bindAttr style="cssSize"}}>
                                <div {{bindAttr style="cssFamily"}}>
                                  {{family}}
                                </div>
                              </div>
                            </div>
                          </div>
                        {{/view}}
                      {{/if}}

                      {{#if App.selectedComponentController.content.filterDialogEvents}}
                        <h4>Dialog</h4>
                        {{#view App.InfoBoxDialogView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-dialog"}}
                          <tr>
                            <th>Action</th><th>Participants</th>
                          </tr>
                          <tr><td> ---</td><td> ---</td></tr>
                        {{/view}}
                      {{/if}}

                      {{#if App.selectedComponentController.content.filterTextEvents}}
                        <h4>Text</h4>
                        {{#view App.InfoBoxTextView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-text"}}
                          <tr>
                            <th>Action</th><th>Text</th>
                          </tr>
                          {{#each content.filteredTextEvents}}
                            <tr>
                              <td>Collision {{target}}</td><td class="ellipsis">{{text.text}}</td>
                            </tr>
                          {{/each}}
                        {{/view}}
                      {{/if}}

                    </div>
                  </div><!--/span-->

                  <div class="span4">

                    <div class="infobox-skillset infobox-artifex">

                      {{#unless App.selectedComponentController.content.icon}}
                        {{#unless App.selectedComponentController.content.animation}}
                          {{view App.EmptySettingsView templateName="emptySettings"}}
                        {{/unless}}
                      {{/unless}}

                      {{#if App.selectedComponentController.content.icon}}
                        <h4>Image</h4>
                        {{#view App.InfoBoxSpriteView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-sprite"}}
                          <tr>
                            <td colspan"2">
                             <img {{bindAttr src="content.icon"}} class="sprite">
                            </td>
                          </tr>
                        {{/view}}
                      {{/if}}

                      {{#if App.selectedComponentController.content.filteredAnimationEvents}}
                        <h4>Animation</h4>
                        {{#view App.InfoBoxAnimationView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-animation"}}
                          <tr>
                            <th>Action</th><th>Animation</th>
                          </tr>
                          <tr>
                            <td> ---</td><td> ---</td>
                          </tr>
                        {{/view}}
                      {{/if}}

                    </div>

                    <div class="infobox-skillset infobox-arcitectus">

                      {{#unless App.selectedComponentController.content.filteredAudioEvents}}
                        {{view App.EmptySettingsView templateName="emptySettings"}}
                      {{/unless}}

                      {{#if App.selectedComponentController.content.filteredAudioEvents}}
                        <h4>Audio</h4>
                        {{#view App.InfoBoxAudioView contentBinding="App.selectedComponentController.content" tagName="table" class="table infobox infobox-audio"}}
                          {{#each content.filteredAudioEvents}}
                            <tr>
                              <td>
                                {{event}}
                              </td>
                              <td>
                                <audio>
                                  <source src="/editor/static/game/audios/ogg/boom.ogg" type="audio/ogg" />
                                </audio>
                                <button class="btn btn-success btn-mini btn-play"><i class="icon-play icon-white"></i></button>
                              </td>
                              <td>
                                {{audio.playCount}}
                              </td>
                            </tr>
                          {{/each}}
                        {{/view}}
                      {{/if}}

                    </div>
                  </div><!--/span-->

                  <div class="clearfix"></div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      </script>

      <script type="text/x-handlebars" data-template-name="shoutbox-view">
        <div class="magos-shoutbox well">
          <div class="navbar">
            <div class="navbar-inner navbar-inner-in-well">
              <div class="container">

                <a class="btn btn-navbar" data-toggle="collapse" data-target=".shoutbox-collapse">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </a>

                <h3 class="sortable-handle">Shoutbox</h3>

                <div class="nav-collapse shoutbox-collapse">
                  <div class="magos-shoutbox-log">
                    <table>
                      {{#view App.ShoutsView}}
                        {{#each content}}
                          <tr {{bindAttr class="magos" }}>
                            <td>{{time}}</td><td>{{userName}}</td><td>{{message}}</td>
                          </tr>
                        {{/each}}
                      {{/view}}
                    </table>
                  </div>

                  {{#view App.ShoutForm controllerBinding="App.shoutsController"}}
                    {{view Ember.TextField type="text" class="input" viewName="textField" placeholder="Shout"}}
                    <button type="submit" class="btn btn-info">Shout</button>
                  {{/view}}

                </div>
              </div>
            </div>
          </div>
        </div>
      </script>

      <script type="text/x-handlebars" data-template-name="dialog-new-item">
        <div class="modal fade hide" id="dialog-new-item">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Add New Item</h3>
          </div>
          {{#view App.AddItemForm}}
          <div class="modal-body">
              <fieldset>
                <div class="control-group" style="margin-bottom: 0;">
                  <label class="control-label" style="font-weight:bold;" for="input01">Give item some descriptive name</label>
                  <div class="controls">
                    {{view Ember.TextField valueBinding="itemTitle" class="input-xlarge" placeholder="Item Name"}}
                    <p class="help-block">Notice! Every item must have an unique name!</p>
                  </div>
                </div>

                <div class="control-group" style="margin-bottom: 0;">
                  <label class="control-label" style="font-weight:bold;" for="input01">What kind of Item this is?</label>
                  <div class="controls">
                    {{view Ember.Select contentBinding="App.componentTypesController.content" optionLabelPath="content.name" optionValuePath="content.name" selectionBinding="compType" class="input-xlarge" }}
                  </div>
                </div>
              </fieldset>
          </div>
          <div class="modal-footer">
            <button class="btn" data-dismiss="modal">Cancel</button>
            <button class="btn btn-success" type="submit">Add Item</button>
          </div>
          {{/view}}
        </div>
        </script>

        <!-- image assets -->
        <script type="text/x-handlebars" data-template-name="dialog-image-assets">
        <div class="modal fade hide" id="image-assets">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Images</h3>
          </div>
          <div class="modal-body">
            <ul class="nav nav-tabs">
              <li class="active">
                <a href="#images-tab" data-toggle="tab">Images</a>
              </li>
              <li class="disabled"><a href="#">Animations</a></li>
              <li><a href="#backgrounds-tab" data-toggle="tab">Backgrounds</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="images-tab">
                <ul class="assets-list">
                {{#view App.ImageAssetsView contentBinding="App.imageAssetsController.blocks"}}
                  {{#each content}}
                    <li {{bindAttr data-file="file"}} {{bindAttr data-ext="ext"}} {{bindAttr data-type="type"}} {{bindAttr data-sprite="slug"}}><img {{bindAttr src="apiPath"}} /><span>{{name}}</span></li>
                  {{/each}}
                {{/view}}
                </ul>
              </div>
              
              <div class="tab-pane" id="backgrounds-tab">
                <ul class="assets-list">
                {{#view App.ImageAssetsView contentBinding="App.imageAssetsController.backgrounds"}}
                  {{#each content}}
                    <li {{bindAttr data-file="file"}} {{bindAttr data-type="type"}} {{bindAttr data-sprite="slug"}}><img {{bindAttr src="apiPath"}} /><span>{{name}}</span></li>
                  {{/each}}
                {{/view}}
                </ul>
              </div>

            </div> <!-- /* tab-content */ -->

          </div>
          <div class="modal-footer">
            <button class="btn btn-close" type="submit">Cancel</button>
            <button class="btn btn-success btn-select" type="submit">Select</button>
          </div>
        </div>
        </script>

        <script type="text/x-handlebars-template" data-template-name="empty-settings">
          <h4 style="margin: 8px 0;">No Settings</h4>
        </script>
        <!-- /* Handlebars templates end {{#view App.TitleView}} {{title}} {{/view}} */ -->

  <script type="text/x-handlebars">
  <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
  <div class="container-fluid">

  <img src="/editor/static/img/wiz-head-white.png" class="wiz" title="" alt="" />

  <div class="btn-toolbar general-toolbar pull-right">

    <div class="btn-group">
      <button class="btn btn-info btn-grid active"><i class="icon-th icon-white"></i></button>
    </div>

    <div class="btn-group">
      <button class="btn btn-info btn-magosbook"><i class="icon-book icon-white"></i></button>
    </div>

    <div class="btn-group">
      <button class="btn btn-info btn-gameinfo"><i class="icon-info-sign icon-white"></i></button>
    </div>

    <div class="btn-group btn-group-theme">
      <a class="btn btn-info" data-theme="light" href="#">Light</a>
      <a class="btn btn-info active" data-theme="dark" href="#">Dark</a>
    </div>

    {{#view App.LanguageSelectionView class="btn-group btn-group-language"}}

    <a class="btn btn-info dropdown-toggle" data-toggle="dropdown" href="#">
      <img {{bindAttr src="content.flag"}} />&nbsp;&nbsp;<span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
    {{#each App.languagesController}}
      {{#view App.LangList tagName="li" languageBinding="this"}}
      <a href="#"><img {{bindAttr src="language.flag"}} class="icon-flag">&nbsp;&nbsp;{{language.title}}</a>
      {{/view}}
    {{/each}}
    </ul>
    {{/view}}

    <div class="btn-group btn-group-help">
      <button class="btn btn-warning"><i class="icon-question-sign icon-white"></i></button>
    </div>

    </div>

    <div class="btn-toolbar pull-right game-toolbar">

      <div class="btn-group btn-group-scene">
      {{#each App.scenesController}}
        {{#view App.SelectSceneBtn tagName="button" sceneBinding="this"}}
          {{scene.name}}
        {{/view}}
      {{/each}}
      </div>

      <div class="btn-group btn-group-preview help-popover" data-placement="bottom" title="Preview" data-content="Play your game as it is now. Use this to test that everything works the way you wanted.">
        <button class="btn btn-success btn-preview">Preview</button>
      </div>

      {{#view App.PublishedView}}
        <button {{bindAttr class="privateState:active alwaysTrue:btn alwaysTrue:btn-success"}}>Public</button>
        <button {{bindAttr class="publicState:active alwaysTrue:btn alwaysTrue:btn-success"}}>Private</button>
      {{/view}}

      </div>

    </div>
  </div>
  </div>
  </script>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span9 sortable-mainarea">

      <script type="text/x-handlebars">
      <div class="row-fluid canvas-container">
        <div class="canvas well">

          <!-- intro -->
          <div class="canvas-pane canvas-div canvas-intro"></div>

          <!-- table -->
          <table class="canvas-pane canvas-table canvas-game" style="display:none;"></table>

          <!-- outro -->
          <div class="canvas-pane canvas-div canvas-outro" style="display:none;"></div>

        </div><!-- canvas well -->
      </div>
      </script>

      <script type="text/x-handlebars">
        <div class="row-fluid">

          <div class="span3 chest-container scene-chest-container">
            <ul class="chest scene-chest">
              {{#each App.sceneComponentsController}}
                {{#view App.SceneComponentsView tagName="li" itemBinding="this" classNameBindings="uiSelected"}}
                <img {{bindAttr class="item.active item.potionsStr item.scenesStr alwaysTrue:scene-item"}} {{bindAttr src="item.icon"}} {{bindAttr alt="item.title"}} {{bindAttr title="item.title"}} {{bindAttr data-slug="item.slug"}} /></li>
                {{/view}}
              {{/each}}
            </ul>
            <div class="clearfix"></div>
          </div>

          <div class="span9 chest-container game-container">
            <ul class="chest item-chest">
              {{#each App.gameComponentsController}}
                {{#view App.GameComponentsView tagName="li" itemBinding="this" classNameBindings="uiSelected"}}
                <img class="game-item" {{bindAttr class="item.active"}} {{bindAttr src="item.icon"}} {{bindAttr alt="item.title"}} {{bindAttr title="item.title"}} {{bindAttr data-slug="item.slug"}} /></li>
                {{/view}}
              {{/each}}

              {{#view App.AddGameComponentView tagName="li" itemBinding="this" class="add-item" title="Add New Item"}}
                <img class="action-item" src="/editor/static/img/icons/icon-add.png" alt="Add New Item" title="Add New Item">
              {{/view}}

              {{#view App.RemoveGameComponentView tagName="li" itemBinding="this" class="remove-item" title="Remove Item"}}
                <img class="action-item" src="/editor/static/img/icons/icon-trash.png" alt="Remove Item" title="Remove Item">
              {{/view}}

            </ul>
            <div class="clearfix"></div>
          </div>

        </div>
      </script>

      </div><!--/ left side-->


      <div class="span3">
          <script type="text/x-handlebars">
          {{#view App.MagosView}}
            {{#each content}}
              <div {{bindAttr class=":sortable-item :well activeUser:active-user"}}>
              {{#if user}}
                <h3 class="sortable-handle">{{user.userName}}</h3>

                {{#if user.busy}}
                  <img src="/editor/static/img/icons/icon-busy.png" class="busy-icon" title="User is busy right now" />
                {{else}}
                  <img src="/editor/static/img/icons/icon-available.png" class="busy-icon" title="You can change the roles with the user" />
                {{/if}}

              {{else}}
                <h3 class="capitalize sortable-handle">{{magos}}</h3>
                <img src="/editor/static/img/icons/icon-available.png" class="busy-icon" title="You can change the roles with the user" style="opacity: 0.4;" />
              {{/if}}

              <div {{bindAttr class="magos:magos-potions magos activeUser:selected-magos"}}>
                  <div class="inner-shadow skillset">
                    <!-- todo convert skillset icon to view -->
                    <img class="skillset-icon" {{bindAttr data-magos="magos"}} {{bindAttr src="icon"}} />
                  </div>
                  <table class="table">
                    <tbody>
                      {{#each potions}}
                      <tr>
                        <td>
                          {{view App.PotionView contentBinding="this"}}
                        </td>
                        <td class="capitalize">
                          {{title}}
                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>

                {{#if activeUser}}

                {{#if isArcitectus}}

                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:rules magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Rules</legend>
                    {{#view App.MagosComponentPropertyView contentBinding="this"}}
                    <div class="finish-action action-group">
                      <div class="control-group">

                        <div class="control-group">
                          <label class="control-label">Checkpoints</label>
                          <div class="controls">
                            {{view App.NumberField class="input" min="0" max="1000"}}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Scores</label>
                          <div class="controls">
                            {{view App.NumberField class="input" min="0" max="1000"}}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Collision</label>
                          <div class="controls">
                            {{#view Ember.Select contentBinding="App.selectedComponentController.content.collisions" optionLabelPath="content.name" optionValuePath="content.name" selectionBinding="collision" class="input-xlarge"}}
                              {{log content}}
                            {{/view}}
                          </div>
                        </div>

                      </div>
                    </div>

                    <div class="form-actions">
                      <button class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                      <button class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                    </div>
                    {{/view}}

                    </fieldset>
                  </form>
                </div>

                {{/if}}

                {{#if isArtifex}}

                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:image magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Image</legend>
                    {{#view App.MagosComponentPropertyView contentBinding="this"}}
                    <div class="image-action action-group">
                      <div class="control-group" style="text-align:center;">
                        <button {{action "openImageAssetsDialog"}} class="btn btn-success borrow-image-button icon-white" style="width: 47%;padding-bottom: 3px;padding-top: 3px;height: 26px;"><i class="icon-folder-open icon-white"></i> Borrow</button>
                      </div>
                    </div>


                    <div class="form-actions">
                      <button class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                      <button class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                    </div>
                    {{/view}}

                    </fieldset>
                  </form>
                </div>

                {{/if}}

                {{#if isPhysicus}}

                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:controls magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Controls</legend>
                    {{#view App.MagosComponentPropertyView}}
                      <div class="action-group">
                        <div class="control-group">
                          <label class="control-label">Method</label>
                          <div class="controls">
                            {{view Ember.Select contentBinding="App.potionsController.controls.methods" optionLabelPath="content.method" optionValuePath="content.method" selectionBinding="controlsMethod" class="input-xlarge" }}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Speed</label>
                          <div class="controls">
                            {{view App.NumberField valueBinding="view.controls.speed" class="input" min="0" max="1000"}}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Jump Height</label>
                          <div class="controls">
                            {{view App.NumberField valueBinding="view.controls.jumpHeight" class="input" min="0" max="1000"}}
                          </div>
                        </div>


                      </div>

                      <div class="form-actions">
                        <button {{action "submitControlsProperties"}} class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                        <button {{action "cancelFormSubmit"}} class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                      </div>
                    {{/view}}

                    </fieldset>
                  </form>

                </div>


                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:collision magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Collision</legend>
                    {{#view App.MagosComponentPropertyView}}
                      <div class="action-group">

                        <div class="control-group">
                          <label class="control-label">When this element hits</label>
                          <div class="controls">
                            {{view Ember.Select contentBinding="App.gameComponentsController.collisionTargets" optionLabelPath="content.title" optionValuePath="content.slug" selectionBinding="App.gameComponentsController.selectedCollisionTarget" class="input-xlarge" }}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">then</label>
                          <div class="controls">
                            {{view Ember.Select contentBinding="App.potionsController.collision.events" optionLabelPath="content.title" optionValuePath="content.event" selectionBinding="App.gameComponentsController.selectedCollisionEvent" class="input-xlarge" }}
                          </div>
                        </div>

                      </div>

                      <div class="form-actions">
                        {{#if App.gameComponentsController.collisionTargets}}
                        <button {{action "submitCollisionProperties"}} class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                        {{/if}}
                        <button {{action "cancelFormSubmit"}} class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                      </div>

                    {{/view}}
                    </fieldset>
                  </form>
                </div>


                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:gravitation magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Gravitation</legend>
                    {{#view App.MagosComponentPropertyView}}
                      <div class="action-group">

                        <div class="control-group">
                          <label class="control-label">Strength</label>
                          <div class="controls" id="gravitation-controls" style="position:relative;">
                            <span class="gravitation-strength low"></span>
                            <div id="gravitationStrength">
                              <span class="slider-tooltip"></span>
                            </div>
                            <span class="gravitation-strength high"></span>
                            {{view App.HiddenDecimalNumberField valueBinding="view.strength" class="input gravitationStrengthVal" min="0.0" max="1.0" step="0.1" }}
                          </div>
                        </div>


                      </div>

                      <div class="form-actions">
                        <button {{action "submitGravitationProperties"}} class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                        <button {{action "cancelFormSubmit"}} class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                      </div>

                    {{/view}}
                    </fieldset>
                  </form>
                </div>

                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:type magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Type</legend>
                    {{#view App.MagosComponentPropertyView}}
                      <div class="action-group">
                        <div class="control-group">
                          <label class="control-label">Type</label>
                          <div class="controls">
                            {{view Ember.Select contentBinding="App.potionsController.compTypes.types" optionLabelPath="content.title" optionValuePath="content.title" selectionBinding="view.curCompType" class="input-xlarge" }}
                          </div>

                        </div>

                      </div>

                      <div class="form-actions">
                        <button {{action "submitCompTypeProperties"}} class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                        <button {{action "cancelFormSubmit"}} class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                      </div>
                    {{/view}}

                    </fieldset>
                  </form>

                </div>




                {{/if}}

                {{#if isPrincipes}}



                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:font magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Font</legend>
                    {{#view App.MagosComponentPropertyView}}
                      <div class="action-group">

                        <div class="control-group">
                          <label class="control-label">Family</label>
                          <div class="controls">
                            {{view Ember.TextField type="text" class="input" valueBinding="view.family" }}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Size</label>
                          <div class="controls">
                            {{view App.NumberField valueBinding="view.fontSize" class="input" min="8" max="40"}}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Color</label>
                          <div class="controls">
                            {{view App.ColorField valueBinding="view.fontColor" class="input"}}
                          </div>
                        </div>

                        <div class="control-group">
                          <label class="control-label">Background color</label>
                          <div class="controls">
                            {{view App.ColorField valueBinding="view.fontBackground" class="input"}}
                          </div>
                        </div>

                      </div>

                      <div class="form-actions">
                        <button {{action "submitFontProperties"}} class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                        <button class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                      </div>

                    {{/view}}

                </div>

                <div {{bindAttr class="magos:magos-potions magos:magos-potion-form magos magos:score magos:hide"}} style="display:none;">
                <form class="form-vertical">
                  <fieldset>
                    <legend>Scores</legend>

                    {{#if App.selectedComponentController.content.filteredScoreEvents}}
                    {{#each App.selectedComponentController.content.filteredScoreEvents}}
                      {{#view App.MagosComponentPropertyView contentBinding="this"}}
                      <div class="action-group">
                        <div class="control-group">
                          <button {{action "removeComponentProperty"}} class="btn btn-danger btn-del-action pull-right"><i class="icon-minus icon-white"></i></button>
                          <label class="control-label">Action</label>
                          <div class="controls">
                            <select class="span12" disabled="disabled">
                              <option>Collision {{content.target}}</option>
                            </select>
                          </div>
                        </div>
                        <div class="control-group">
                          <label class="control-label">Score</label>
                          <div class="controls">
                            {{view App.NumberField class="input" min="-1000" max="1000" valueBinding="content.score"}}
                          </div>
                        </div>
                      </div>
                      {{/view}}
                    {{/each}}

                    {{else}}
                      {{#view App.MagosComponentPropertyView}}
                      {{#if App.gameComponentsController.scoreCollisionTargets}}
                        <div class="action-group">
                          
                          <div class="control-group">
                            <label class="control-label">When this element hits</label>
                            <div class="controls">
                            {{view Ember.Select contentBinding="App.gameComponentsController.scoreCollisionTargets" optionLabelPath="content.title" optionValuePath="content.slug" selectionBinding="App.gameComponentsController.selectedScoreTarget" class="input-xlarge"}}

                            </div>
                          </div>

                          <div class="control-group">
                            <label class="control-label">with action</label>
                            <div class="controls">
                              {{view Ember.Select contentBinding="App.gameComponentsController.scoreCollisionEvents" optionLabelPath="content.title" optionValuePath="content.slug" selectionBinding="App.gameComponentsController.selectedScoreEvent" class="input-xlarge" }}
                            </div>
                          </div>

                          <div class="control-group">
                            <label class="control-label">Score</label>
                            <div class="controls">
                              {{view App.NumberField class="input" min="-1000" max="1000" valueBinding="selectedScoreScore"}}
                            </div>
                          </div>
                        </div>
                        <div class="form-actions">
                          <button {{action "submitScoresProperties"}} class="btn btn-success btn-back-potion"><i class="icon-ok icon-white"></i></button>
                          <button {{action "cancelFormSubmit"}} class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                        </div>
                      {{else}}
                        <p>No collisions found. Please define a collision first.</p>
                        <div class="form-actions">
                          <button {{action "cancelFormSubmit"}} class="btn btn-info btn-reset-action pull-right"><i class="icon-remove icon-white"></i></button>
                        </div>
                      {{/if}}

                      {{/view}}
                    {{/if}}

                    </fieldset>
                  </form>
                </div>



                {{/if}}

              {{/if}}

              </div>
            {{/each}}

          {{/view}}

          </script>          



        </div><!--/ sortable area -->
      </div><!--/ right span -->

    </div>

    <hr>

    <footer>
      <p>&copy; Magical 2012</p>
    </footer>

  </div>

  <!-- preview -->
  <script type="text/x-handlebars">
  <div class="modal fade hide" id="dialog-preview">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>Game Preview</h3>      
    </div>
    <div class="modal-body">
      {{#view App.GameView}}
        <iframe id="preview" {{bindAttr src="playPath"}} seamless></iframe>
      {{/view}}
    </div>
    <div class="modal-footer">
      <button class="btn btn-info btn-close" type="submit">Close</button>
    </div>
  </div>
  </script>

  <!-- info -->
  <script type="text/x-handlebars">
  <div class="modal fade hide" id="dialog-info">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>Game Info</h3>
    </div>
    <div class="modal-body">
      <p>Snippet: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
          tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
          quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat.</p>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse
          cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
          proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-info btn-close" type="submit">Close</button>
    </div>
  </div>
  </script>

  <script type="text/x-handlebars" data-template-name="magos-potion">
    <h1>Potion</h2>

  </script>


  <!-- flash messages -->
  <script type="text/x-handlebars">
    {{#view Ember.FlashView id="flash-view"}}
      <div id="message">
        {{content.message}}
      </div>
    {{/view}}
  </script>

  <audio id="potion-sound" preload src="/editor/static/audio/magic-chime-06.wav"></audio>

  <script type="text/javascript">
  ENV = {
    CP_DEFAULT_CACHEABLE: true,
    // VIEW_PRESERVES_CONTEXT: true,
    RAISE_ON_DEPRECATION: true
  };
  </script>
  <script src="/editor/static/js/vendor/jquery.min.js"></script>
  <script src="/editor/static/js/vendor/jquery-ui.min.js"></script>
  <script src="/editor/static/js/vendor/bootstrap.min.js"></script>
  <script src="/editor/static/js/vendor/ember.js"></script>
  <script src="/editor/socket.io/socket.io.js"></script>
  <script src="/editor/static/js/plugins.js"></script>
  <script src="/editor/static/js/vendor/flash_message.js"></script>
  <script src="/editor/static/js/vendor/flash_controller.js"></script>
  <script src="/editor/static/js/vendor/flash_queue.js"></script>
  <script src="/editor/static/js/vendor/flash_view.js"></script>
  <script src="/editor/static/js/main.js"></script>

</body>
</html>
